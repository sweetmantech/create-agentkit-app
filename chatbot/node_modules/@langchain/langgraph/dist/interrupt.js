import { AsyncLocalStorageProviderSingleton } from "@langchain/core/singletons";
import { GraphInterrupt } from "./errors.js";
import { CONFIG_KEY_RESUME_VALUE, MISSING } from "./constants.js";
export function interrupt(value) {
    const config = AsyncLocalStorageProviderSingleton.getRunnableConfig();
    if (!config) {
        throw new Error("Called interrupt() outside the context of a graph.");
    }
    const resume = config.configurable?.[CONFIG_KEY_RESUME_VALUE];
    if (resume !== MISSING) {
        return resume;
    }
    else {
        throw new GraphInterrupt([{ value, when: "during" }]);
    }
}
