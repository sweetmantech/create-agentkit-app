"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.interrupt = void 0;
const singletons_1 = require("@langchain/core/singletons");
const errors_js_1 = require("./errors.cjs");
const constants_js_1 = require("./constants.cjs");
function interrupt(value) {
    const config = singletons_1.AsyncLocalStorageProviderSingleton.getRunnableConfig();
    if (!config) {
        throw new Error("Called interrupt() outside the context of a graph.");
    }
    const resume = config.configurable?.[constants_js_1.CONFIG_KEY_RESUME_VALUE];
    if (resume !== constants_js_1.MISSING) {
        return resume;
    }
    else {
        throw new errors_js_1.GraphInterrupt([{ value, when: "during" }]);
    }
}
exports.interrupt = interrupt;
