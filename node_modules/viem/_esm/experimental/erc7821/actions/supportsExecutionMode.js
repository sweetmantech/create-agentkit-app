import { readContract } from '../../../actions/public/readContract.js';
import { abi, executionMode } from '../constants.js';
/**
 * Checks if the contract supports the ERC-7821 execution mode.
 *
 * @example
 * ```ts
 * import { createClient, http } from 'viem'
 * import { mainnet } from 'viem/chains'
 * import { supportsExecutionMode } from 'viem/experimental/erc7821'
 *
 * const client = createClient({
 *   chain: mainnet,
 *   transport: http(),
 * })
 *
 * const supported = await supportsExecutionMode(client, {
 *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',
 * })
 * ```
 *
 * @param client - Client to use.
 * @param parameters - {@link SupportsExecutionModeParameters}
 * @returns If the execution mode is supported. {@link SupportsExecutionModeReturnType}
 */
export async function supportsExecutionMode(client, parameters) {
    const { address, opData } = parameters;
    const mode = opData ? executionMode.opData : executionMode.default;
    try {
        return await readContract(client, {
            abi,
            address,
            functionName: 'supportsExecutionMode',
            args: [mode],
        });
    }
    catch {
        return false;
    }
}
//# sourceMappingURL=supportsExecutionMode.js.map